
APIList = [{"url":"/SavedAccounts/getAll","name":["SavedAccounts","getAll"],"params":["limit","page","sinceId"]},{"url":"/SavedAccounts/getById","name":["SavedAccounts","getById"],"params":["id"]},{"url":"/SavedAccounts/getAllOfUser","name":["SavedAccounts","getAllOfUser"],"params":["accessToken"]},{"url":"/SavedAccounts/update","name":["SavedAccounts","update"],"params":["accessToken","id","accountUsername","accountPassword","isFavorate","lastUsed","nUsed","loginUrl"]},{"url":"/SavedAccounts/remove","name":["SavedAccounts","remove"],"params":["id"]},{"url":"/SavedAccounts/addNew","name":["SavedAccounts","addNew"],"params":["accessToken","accountUsername","accountPassword","isFavorate","loginUrl"]},{"url":"/Users/getAll","name":["Users","getAll"],"params":["limit","page","sinceId"]},{"url":"/Users/getById","name":["Users","getById"],"params":["id"]},{"url":"/Users/getByIdI","name":["Users","getByIdI"],"params":["id"]},{"url":"/Users/doesExist","name":["Users","doesExist"],"params":["id"]},{"url":"/Users/update","name":["Users","update"],"params":["id","name","username","email"]},{"url":"/Users/remove","name":["Users","remove"],"params":["id"]},{"url":"/Users/sendVerificationCode","name":["Users","sendVerificationCode"],"params":["id"]},{"url":"/Users/verifyAccount","name":["Users","verifyAccount"],"params":["verificationCode"]},{"url":"/Users/fbLogin","name":["Users","fbLogin"],"params":["fb_accesstoken"]},{"url":"/Users/getLoggedIn","name":["Users","getLoggedIn"],"params":["accessToken"]},{"url":"/Users/addNew","name":["Users","addNew"],"params":["name","username","email"]}]






API = {}


getFn = function(de) {
  var fn, i, len, p, ref, url;
  url = de.url;
  if (url[0] === '/') {
    url = url.slice(1);
  }
  url += "?";
  fn = "var url = '" + url + "';";
  ref = de.params;
  for (i = 0, len = ref.length; i < len; i++) {
    p = ref[i];
    fn += "\nif(" + p + ") url += '" + p + "='+" + p + "+'&';\n";
  }
  return fn += "\n\n$.get(url).done(function(data){\n  cb(null , JSON.parse(data))\n}).fail(function(data) {\n    cb(data)\n  })\n";
};


// ---
// generated by coffee-script 1.9.2

for( var i=0; i < APIList.length ; i++ )
{
	

	var ap = APIList[i];
	d = API;
	for(var j=0; j<ap.name.length ; j++ )
	{
		if(typeof  d[ap.name[j]] == 'undefined' )
		{
			d[ap.name[j]] = {};
		}
		

		if( j== ap.name.length-1)
		{
			d[ap.name[j]] = getFn(ap);
			// console.log( d[ap.name[j]].toString() )
			d[ap.name[j]] = new Function(  ap.params.join(',')+',cb' , d[ap.name[j]]  );
			// console.log( d[ap.name[j]].toString() )
		}	
		else
			d = d[ap.name[j]];
	}


}






/*



getFn = (de) ->
 
  url = de.url
  
  if url[0] == '/'
    url = url.slice(1)
  url += "?"


  fn = "var url = '#{url}';"

  for p in de.params


    fn += """

    if(#{p}) url += '#{p}='+#{p}+'&';

    """    




  fn += """


  $.get(url).done(function(data){
    cb(null , JSON.parse(data))
  }).fail(function(data) {
      cb(data)
    })

  """




*/
